#!/bin/bash

# Unset everything we messed with
unset LIBGL_FB #=0
unset LIBGL_GL #=21
unset LIBGL_ALWAYS_INDIRECT #=1
unset DRI_PRIME #=1
unset LIBGL_ALWAYS_SOFTWARE
unset LIBGL_XREFRESH
unset EGL_PLATFORM
unset LIBGL_DEFAULTWRAP
unset LIBGL_FORCENARROW
unset MESA_LOADER_DRIVER_OVERRIDE
unset GALLIUM_DRIVER
unset DRI_PRIME
unset MESA_GL_VERSION_OVERRIDE
unset MESA_GLSL_VERSION_OVERRIDE
unset vblank_mode
unset LIBGL_ALWAYS_INDIRECT
unset __GL_SYNC_TO_VBLANK

# Box86
export BOX86_DYNAREC=1
export BOX86_DYNAREC_BIGBLOCK=3
export BOX86_DYNAREC_STRONGMEM=2
export BOX86_GL=1
export BOX86_LOG=1
#export BOX86_LIBGL=/usr/lib/arm-linux-gnueabihf/gl4es/libGL.so.1
#export BOX86_LD_LIBRARY_PATH="/usr/lib/arm-linux-gnueabihf/gl4es:/usr/lib/arm-linux-gnueabihf"      
#export BOX86_LIBGL=/usr/lib/arm-linux-gnueabihf/libGL.so.1

# Wine
export WINEARCH=win32
export WINEDEBUG=-all
export WINEESYNC=0
export WINEFSYNC=0

setarch linux32 -L /home/trixie/.local/share/wine/bin/wine "$@"
